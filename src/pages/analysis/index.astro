---
import Header from "../../components/Header.astro"
import Layout from "../../layouts/Layout.astro"
import ListItem from "../../components/ListItem.astro"

// Mock data for analysis posts - replace with real content later
const analysisData = [
	{
		slug: "react-use-wizard-patterns",
		title: "What I Learned from react-use-wizard's Source Code",
		description: "5 clever patterns that every React developer should know from analyzing this wizard component library.",
		library: "react-use-wizard",
		readTime: "8 min read",
		publishDate: "2025-01-15",
		tags: ["React", "TypeScript", "Component Design", "Hooks"],
		difficulty: "Intermediate",
		featured: true
	},
	{
		slug: "use-debounce-performance",
		title: "How use-debounce Achieves Perfect Performance",
		description: "Deep dive into the internals of use-debounce and the optimization techniques that make it lightning fast.",
		library: "use-debounce",
		readTime: "6 min read", 
		publishDate: "2025-01-10",
		tags: ["Performance", "Hooks", "Optimization"],
		difficulty: "Advanced",
		featured: false
	},
	{
		slug: "zustand-state-magic",
		title: "The Magic Behind Zustand's Simple API",
		description: "Understanding how Zustand creates such a clean state management experience with minimal boilerplate.",
		library: "zustand",
		readTime: "10 min read",
		publishDate: "2025-01-05", 
		tags: ["State Management", "TypeScript", "API Design"],
		difficulty: "Intermediate",
		featured: false
	}
]

const featuredAnalysis = analysisData.filter(post => post.featured)
const recentAnalysis = analysisData.filter(post => !post.featured).slice(0, 4)
---

<Layout title="Code Analysis - learnfromcode">
	<Header />
	
	<main class="max-w-4xl mx-auto px-6 py-12 bg-white dark:bg-gray-900 transition-colors">
		<!-- Header Section -->
		<section class="mb-16">
			<div class="mb-6">
				<a href="/" class="text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-sm transition-colors inline-flex items-center">
					<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m0 0l8 8a1 1 0 010 1.414l-8 8z" />
					</svg>
					Back to home
				</a>
			</div>
			
			<h1 class="text-5xl md:text-6xl font-bold text-gray-900 dark:text-white mb-6">
				Code Analysis
			</h1>
			
			<div class="space-y-4 text-gray-700 dark:text-gray-300 leading-relaxed mb-8">
				<p class="text-xl">
					Learn from the <strong class="text-gray-900 dark:text-white">best open source libraries</strong> by analyzing their source code. 
					Discover patterns, techniques, and insights that will make you a better developer.
				</p>
				<p>
					Every analysis breaks down real-world code from popular libraries, explains the why behind design decisions, 
					and shows you how to apply these patterns in your own projects.
				</p>
			</div>
			
			<!-- Stats -->
			<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
				<div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800/50 rounded-lg p-4 text-center">
					<div class="text-2xl font-bold text-blue-700 dark:text-blue-300 mb-1">
						{analysisData.length}
					</div>
					<div class="text-blue-600 dark:text-blue-400 text-sm">Libraries Analyzed</div>
				</div>
				<div class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800/50 rounded-lg p-4 text-center">
					<div class="text-2xl font-bold text-green-700 dark:text-green-300 mb-1">
						15+
					</div>
					<div class="text-green-600 dark:text-green-400 text-sm">Patterns Discovered</div>
				</div>
				<div class="bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800/50 rounded-lg p-4 text-center">
					<div class="text-2xl font-bold text-purple-700 dark:text-purple-300 mb-1">
						32 min
					</div>
					<div class="text-purple-600 dark:text-purple-400 text-sm">Average Read Time</div>
				</div>
			</div>
		</section>

		<!-- Featured Analysis -->
		{featuredAnalysis.length > 0 && (
			<section class="mb-16">
				<h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-8">
					ðŸ”¥ Featured Analysis
				</h2>
				{featuredAnalysis.map((post) => (
					<div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800/50 rounded-lg p-8 mb-6">
						<div class="flex flex-wrap items-center gap-2 mb-4">
							<span class="bg-blue-600 text-white px-2 py-1 text-xs rounded font-medium">
								Featured
							</span>
							<span class="bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-2 py-1 text-xs rounded">
								{post.library}
							</span>
							<span class="bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-2 py-1 text-xs rounded">
								{post.difficulty}
							</span>
							<span class="text-gray-600 dark:text-gray-400 text-xs">
								{post.readTime}
							</span>
						</div>
						
						<h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-3">
							<a href={`/analysis/${post.slug}`} class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">
								{post.title}
							</a>
						</h3>
						
						<p class="text-gray-700 dark:text-gray-300 mb-4 leading-relaxed">
							{post.description}
						</p>
						
						<div class="flex flex-wrap gap-2 mb-4">
							{post.tags.map((tag) => (
								<span class="text-blue-600 dark:text-blue-400 text-sm">
									#{tag.toLowerCase()}
								</span>
							))}
						</div>
						
						<a 
							href={`/analysis/${post.slug}`} 
							class="inline-flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors"
						>
							Read Analysis
							<svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
							</svg>
						</a>
					</div>
				))}
			</section>
		)}

		<!-- Recent Analysis -->
		{recentAnalysis.length > 0 && (
			<section class="mb-16">
				<h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-8">
					Recent Analysis
				</h2>
				<div class="space-y-6">
					{recentAnalysis.map((post) => (
						<div class="bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-lg p-6">
							<div class="flex flex-wrap items-center gap-2 mb-3">
								<span class="bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-2 py-1 text-xs rounded">
									{post.library}
								</span>
								<span class="bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-2 py-1 text-xs rounded">
									{post.difficulty}
								</span>
								<span class="text-gray-600 dark:text-gray-400 text-xs">
									{post.readTime}
								</span>
							</div>
							
							<h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">
								<a href={`/analysis/${post.slug}`} class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">
									{post.title}
								</a>
							</h3>
							
							<p class="text-gray-700 dark:text-gray-300 mb-3">
								{post.description}
							</p>
							
							<div class="flex flex-wrap gap-2">
								{post.tags.slice(0, 3).map((tag) => (
									<span class="text-blue-600 dark:text-blue-400 text-sm">
										#{tag.toLowerCase()}
									</span>
								))}
							</div>
						</div>
					))}
				</div>
			</section>
		)}

		<!-- Newsletter CTA -->
		<section class="bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg p-8 text-center">
			<h2 class="text-2xl font-bold text-white mb-4">
				Get New Analysis in Your Inbox
			</h2>
			<p class="text-blue-100 mb-6">
				Join developers learning from the best open source code. New analysis every week.
			</p>
			<div class="flex flex-col sm:flex-row gap-3 max-w-md mx-auto">
				<input 
					type="email" 
					placeholder="your@email.com" 
					class="flex-1 px-4 py-2 rounded-lg border-0 text-gray-900 focus:ring-2 focus:ring-blue-300"
				>
				<button class="bg-white text-blue-600 px-6 py-2 rounded-lg font-medium hover:bg-gray-100 transition-colors">
					Subscribe
				</button>
			</div>
			<p class="text-blue-100 text-sm mt-3">
				No spam. Unsubscribe at any time.
			</p>
		</section>
	</main>
</Layout>
